<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="x-ua-compatible" content="IE=edge">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>api</title>
    <link rel="stylesheet" href="css/global.css"/>
    <script src="../js/jquery.min.js"></script>
    <script src="js/plugin_data.js"></script>
</head>
    <body style="overflow-y:scroll;overflow-x:hidden">
        <div class="header">
            <div class="header_con">
                <h2 class="logo">cloudjs</h2>
                <ul class="main_nav">
                    <li><a href="#;">首页</a></li>
                    <li class="current"><a href="#;">API</a></li>
                    <li><a href="#;">下载</a></li>
                    <li><a href="#;">更新日志</a></li>
                </ul>
            </div>
        </div>
        <div class="main">
            <div class="sidebar">
                <ul class="side_nav">
                    <li>
                        <a href="#;" class="main_item">CloudJs</a>
                        <ul class="sub_nav">
                            <li><a href="#;">新手入门</a></li>
                            <li><a href="example/common.html">公共方法</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="#;" class="main_item">UI组件库</a>
                        <ul class="sub_nav" id="comp_list">

                        </ul>
                    </li>
                </ul>
            </div>
            <div class="primary">
                <iframe src="" width="100%" height="" frameborder="0" class="frame" id="f_1"></iframe>
            </div>
        </div>
        <div class="footer"></div>
    </body>
    <script>
        var autoIframe = function(_o){
            var $iframe=$('#' + _o);
            $iframe.height(500);
            if($.support.msie){
                $iframe.ready(function(){
                	$iframe.height($iframe[0].contentDocument.body.scrollHeight+50);
                });
            }else{
                $iframe.load(function(){
                	$iframe.height($iframe[0].contentDocument.body.scrollHeight+50);
                });
            }
        }
        autoIframe('f_1');
        
        $(function(){
            var pluginHtml = [],
            	hash=location.hash;
            for(var i = 0; i < plugin_data.length; i++ ){
                var plugin = plugin_data[i];
                if(i == 0 && hash==''){
                    $('#f_1').attr('src','example/' + plugin.name + '.html');
                    pluginHtml.push('<li class="current"><a href="example/' + plugin.name + '.html">' + plugin.title + '</a></li>');
                }else{
                    pluginHtml.push('<li><a class="'+plugin.name+'" href="example/' + plugin.name + '.html">' + plugin.title + '</a></li>');
                };
            };
            
            $('#comp_list').html(pluginHtml.join(''));
            
            $('.sub_nav').find('a').click(function(){
                $('.primary').find('iframe')[0].src = $(this).attr('href');
                autoIframe('f_1');
                $(this).parent().addClass('current').siblings().removeClass('current');
                location.hash=this.className;
                return false;
            });
            
            hash=hash.substring(1);
            if(hash!=''){
        		$('#f_1').attr('src','example/' + hash + '.html');
        		console.log($('.'+hash))
        		$('.'+hash).parent().addClass('current');
        		
        	}
            
        });
    </script>
</html>
